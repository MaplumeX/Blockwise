---
文档类型: 产品需求文档 (PRD)
产品名称: Blockwise - 柳比歇夫时间管理 App
版本: v1.1
创建日期: 2026-01-17
最后更新: 2026-01-17
文档作者: Product Team
审核状态: 已审核
---

# Blockwise v1.1 版本功能需求

## 概述

v1.1 版本在 v1.0 基础上，重点提升时间线模块的视觉体验和交互效率，新增时间块视图集成，使时间记录的查看和管理更加直观、高效。

**主要更新**：
1. 时间线UI视觉风格升级
2. 导航与筛选功能增强
3. 统计信息实时展示
4. 交互优化（手势操作、快速操作）
5. 时间块视图集成

---

## 1. 时间线UI增强

### 1.1 功能定位

在v1.0时间线基础上，提升视觉体验和交互效率，使时间记录的查看和管理更加直观、高效。

### 1.2 视觉风格升级

**垂直时间轴设计**：

- **时间轴线条**：
  - 在时间记录列表左侧添加垂直连接线
  - 线条颜色：浅灰色（浅色模式）/ 深灰色（深色模式）
  - 线条宽度：2dp
  - 圆角处理，提升视觉柔和度
- **时间节点圆点**：
  - 每条记录对应一个圆点标记
  - 圆点大小：14dp（直径）
- **卡片设计优化**：
  - 移除当前的左侧细条颜色指示器
  - 改为右上角显示活动类型，标题显示备注（若无备注则显示为活动类型名），标题下方显示起始、结束时间
  - 卡片圆角统一为12dp
  - 卡片内边距优化：16dp（上下）× 16dp（左右）
- **时间范围显示优化**：
  - 使用等宽字体（Monospace）显示时间
  - 时间文本添加浅色背景色块（类似代码块样式）
  - 背景色块圆角：4dp
  - 内边距：6dp（水平）× 3dp（垂直）
- **未追踪时间段显示**：
  - 在连续记录之间，如果间隔>=1分钟，显示"未追踪时间段"
  - 样式：虚线边框的透明卡片
  - 显示时间范围
  - 点击可快速创建该时间段的记录
  - 悬停/按下时背景色变化，提示可交互

### 1.3 导航与筛选功能

**日期选择器**：

- **位置**：页面顶部，标题栏下方
- **布局**：横向滚动的日期按钮列表
- **显示范围**：本周的七天
- **日期按钮样式**：
  - 尺寸：56dp（宽）× 72dp（高）
  - 圆角：12dp
  - 显示内容：星期（小字，上方）+ 日期（X日的X，大字，下方）
  - 未选中状态：浅色背景 + 边框
  - 选中状态：主题色背景 + 白色文字
  - 今天的日期：特殊标记（如底部小圆点）

- **交互行为**：
  - 点击日期按钮切换到对应日期的时间记录
  - 支持左右滑动切换显示周
  - 滑动变化周后默认选择当前选择星期（如当前选择了周五，滑动到上一周，显示的是上周五的内容）
  - 切换日期时有平滑过渡动画

- **快速跳转**：
  - 点击顶部周范围标题，弹出日期选择器（日历视图）
  - 支持快速跳转到任意日期
  - 提供"今天"快捷按钮（标题右边）

- **顶部标题栏**：
  - 显示当前周范围（如"1月15日 - 1月21日"）

### 1.5 交互优化

**快速操作按钮**：

- **悬浮操作按钮**：
  - 保留现有的浮动添加按钮（FAB）
  - 位置：右下角，底部导航栏上方
  - 点击快速创建新记录

**手势操作**：

- **点击上下文菜单**：
  - 点击时间记录卡片，显示上下文菜单
  - 菜单选项：编辑、删除、拆分、合并、复制、分享
  - 菜单采用浮动样式，显示在点击位置附近
  - 支持多选模式（长按后可继续点击其他卡片）

## 2. 成功指标

**用户体验指标**：

- 时间线页面平均停留时长增加20%
- 记录编辑操作的平均步骤减少30%
- 用户对时间线UI的满意度评分 > 4.5/5.0

**性能指标**：

- 时间线首屏加载时间 < 1秒
- 滚动帧率保持在55fps以上
- 内存占用 < 100MB

**功能使用率**：

- 日期选择器使用率 > 60%
- 手势操作使用率 > 40%
- 未追踪时间段点击创建率 > 30%

## 3. 时间块视图集成

### 3.1 功能定位

将时间块视图（Time Block View）集成到时间线模块中，作为时间线的另一种可视化形式。通过日历式的时间块布局，帮助用户更直观地了解一天24小时的时间分配情况，快速识别时间使用模式和空闲时段。

### 3.2 视图切换

**时间线与时间块视图切换**：

- **切换方式**：
  - 在时间线页面顶部添加视图切换按钮（列表图标 ↔ 日历图标）
  - 保存用户的视图偏好，下次打开时恢复
- **数据同步**：
  - 两个视图共享相同的数据源
  - 在任一视图中的修改（编辑、删除、创建）实时同步到另一视图
  - 选中的日期在两个视图间保持一致

### 3.3 页面布局

**顶部**：

- 同时间线视图（切换视图时只变化视图，顶部区域不变化）

**时间块主视图（网格 + 胶囊段）**：

- **布局结构**：
  - 左侧：24小时纵向时间轴（00–23），每小时一行
  - 右侧：分钟网格（默认 5 分钟/格）
  - 支持垂直滚动查看全天；时间轴固定在左侧
  - 不支持横向滚动（网格列数固定，保证时间尺度一致）
- **时间轴设计**：
  - **小时行**：每行代表 1 小时，共 24 行
  - **行内网格**：每行 12 列（5 分钟 × 12 = 60 分钟）
  - **时间文字**：
    - 字体：等宽字体（Monospace）
    - 大小：12sp
    - 颜色：次要文字颜色
    - 对齐：右对齐，距离网格 8dp

### 3.4 时间块设计（网格 + 连续段胶囊）

**A. 底层：分钟网格（Heatmap Grid）**

- **时间粒度**：默认 5 分钟/格（v1.1 固定，不提供用户配置）
- **网格样式**：
  - 每格为小方块或轻圆角方块
  - 空白格：使用低对比背景色（与页面背景同系，区分网格即可）
  - 网格分割：使用极浅分隔线或间距，保证“离散时间”的可读性

**B. 上层：记录段（Entry Segment Capsule）**

- **基本规则**：同一条时间记录（TimeEntry）在网格上覆盖其时间范围内的所有格子，并在上层以“胶囊条带”方式连续呈现。
- **跨小时表现**：
  - 记录跨越多小时，必须按小时行切片显示（每行一段），但视觉上保持连续（同色、对齐、端点一致）
  - 记录开始行：左端圆角；记录结束行：右端圆角；中间行两端为直角（避免断裂感）
- **颜色方案**：
  - 段背景色：使用活动类型颜色
  - 段透明度：80%–90%（保证网格仍隐约可见）
  - 段边框：1dp同色系更深颜色或阴影，用于区分相邻段
- **内容显示（自适应）**：
  - 默认不在单格内显示文字
  - 当连续段长度足够（建议 ≥ 10 分钟）时，允许在段的首行显示活动名称（1行省略号）
  - 当连续段更长（建议 ≥ 60 分钟）时，可在第二行/次要位置显示时间范围（如 09:00–10:30）

**C. 未记录时间段（空白段提示）**

- **展示策略**：空白默认仅以空白格呈现；当用户点击空白区域时，系统可临时高亮“连续空白段”。

### 3.5 交互功能（网格对齐，5分钟步进）

**点击与选择**：

- **点击记录段（胶囊）**：
  - 选中整条记录（跨小时的所有切片同时高亮）
  - 底部弹出详情卡片：活动、时间范围、时长、备注、标签、快捷操作

**范围创建**：

- **长按空白区域并拖拽**：
  - 进入“范围选择”，拖拽起点/终点对齐到 5 分钟网格
  - 松手后弹出创建对话框，开始/结束时间已预填充

**编辑与调整**：

- **长按记录段**：显示上下文菜单：编辑、删除、拆分、复制（可选：进入多选模式）

**冲突与重叠（容错优先，强提示）**：

- 系统应尽量避免产生重叠记录；若由于导入/异常导致存在重叠：
  - 重叠格显示为“纹理叠加 + 警示描边”（而不是并排分列）
  - 点击重叠区域弹出冲突列表，引导用户编辑/删除以消除重叠

**滚动与导航**：

- **垂直滚动**：查看 24 小时全部内容；时间轴固定

### 3.6 视觉细节

- **当前时间指示器**：
  - 在当前时间对应的行内显示一条细横线或小圆点标记，便于定位“现在”
- **选中态**：
  - 被选中的记录段提高对比（描边/阴影/亮度），并弱化未选中段
- **相邻段区分**：
  - 同色相邻段需通过边框/间距/轻阴影区分，避免“连成一整条”的误读
- **空状态**：
  - 当某天无记录：仍显示完整网格（强调“可点击创建”），并在顶部给出轻提示“今天还没有记录”
- **加载状态**：
  - 切换日期时显示骨架屏：骨架优先模拟“网格 + 少量胶囊段”的布局

### 3.7 性能优化

- **渲染策略**：
  - 网格规模固定（24×12=288格），渲染成本可预测
  - 优先减少不必要的重组与复杂测量；记录段按“连续范围”渲染，而非逐格渲染
- **数据缓存**：
  - 缓存已加载日期的数据
  - 预加载前后一天，提升切换速度

### 3.8 可访问性

- **无障碍支持**：
  - 记录段需提供语义化描述（活动名称 + 时间范围 + 时长）
  - 支持 TalkBack 聚焦在“记录段”层级，而不是逐格朗读
- **触摸目标大小**：
  - 小格子仅作为视觉网格；交互以“小时行”为基础（行高建议 ≥ 48dp）
  - 在行内点击时，系统按点击位置自动吸附到最近的 5 分钟格

### 3.9 与时间线视图的对比

| 特性 | 时间线视图 | 时间块视图 |
|------|-----------|-----------|
| **布局** | 垂直列表，按时间倒序 | 24行网格（每行1小时），按时间正序 |
| **时间表达** | 文本 + 轴线 | 分钟网格 + 连续段胶囊 |
| **信息密度** | 高（详细信息） | 高（分布一眼可见，详情按需查看） |
| **适用场景** | 查看/编辑单条记录 | 快速理解时间分配、发现空白段、网格对齐创建 |
| **交互方式** | 点击、长按、菜单操作 | 点击选中、长按范围创建、（可选）拖拽网格对齐调整 |
| **视觉风格** | 卡片式 | 热力图 + 色段式 |

**使用建议**：

- 时间线视图：适合查看和编辑具体记录
- 时间块视图：适合查看整体时间分配、发现空白并快速补录

## 4. 成功指标（更新）

**用户体验指标**：

- 时间线页面平均停留时长增加20%
- 记录编辑操作的平均步骤减少30%
- 用户对时间线UI的满意度评分 > 4.5/5.0
- **时间块视图使用率 > 50%**
- **时间块视图中拖拽调整使用率 > 30%**

**性能指标**：

- 时间线首屏加载时间 < 1秒
- 滚动帧率保持在55fps以上
- 内存占用 < 100MB
- **时间块视图切换响应时间 < 500ms**
- **时间块拖拽操作延迟 < 16ms（60fps）**

**功能使用率**：

- 日期选择器使用率 > 60%
- 手势操作使用率 > 40%
- 未追踪时间段点击创建率 > 30%
- **时间块视图与时间线视图切换频率 > 3次/会话**
